# MissionManager

MissionManagerは、ジャンル・ミッション・タスクの3階層構造でタスクを管理するデスクトップアプリケーションです。PySide6を使用したモダンなGUIを備えています。

## 特徴

- 3階層構造: ジャンル → ミッション → タスクの階層的なタスク管理
- 進捗管理: 各ミッションの完了率をプログレスバーで視覚化
- 期限管理: ミッションに期限を設定可能
- 直感的なUI: 右クリックメニューによる簡単な操作
- 自動保存: JSON形式でデータを自動保存
- 並び替え: ドラッグ&ドロップではなく、メニューから簡単に順序変更


## 要件

- Python 3.10以上
- PySide6

## インストール

1. リポジトリをクローンします：

```bash
git clone https://github.com/yourusername/MissionManager.git
cd MissionManager
```

2. 依存関係をインストールします：

```bash
pip install -r requirements.txt
```

## 使用方法

### 起動方法

```bash
python main.py
```

### 基本的な操作

#### ジャンルの管理

- 追加: 上部の「追加」ボタンをクリック
- 名前変更: ジャンル選択コンボボックスを右クリック → 「名前変更」
- 削除: ジャンル選択コンボボックスを右クリック → 「削除」
- 順序変更: ジャンル選択コンボボックスを右クリック → 「上へ移動」/「下へ移動」

#### ミッションの管理

- 追加: 下部の「ミッション追加」ボタンをクリック
- 名前変更: ミッションカードを右クリック → 「名前変更」
- 期限設定: ミッションカードを右クリック → 「期限を編集」
- 削除: ミッションカードを右クリック → 「削除」
- 順序変更: ミッションカードを右クリック → 「上へ移動」/「下へ移動」

#### タスクの管理

- 追加: ミッションカード内の「タスク追加」ボタンをクリック（タスク表示を有効にする必要があります）
- 完了/未完了: チェックボックスをクリック
- 名前変更: タスクを右クリック → 「名前変更」
- 削除: タスクを右クリック → 「削除」
- 順序変更: タスクを右クリック → 「上へ移動」/「下へ移動」

#### タスクの表示/非表示

ミッションカードの「タスクの表示」ボタンをクリックすると、タスク一覧の表示/非表示を切り替えられます。

## プロジェクト構造

```
MissionManager/
├── main.py              # エントリーポイント
├── app.py               # ビジネスロジック層（AppService）
├── models.py            # データモデル定義
├── storage.py           # データ永続化層（JsonStorage）
├── views.py             # メインウィンドウUI
├── mission_card.py      # ミッションカードUIコンポーネント
├── task_item.py         # タスクアイテムUIコンポーネント
├── data/                # データ保存ディレクトリ（自動生成）
│   └── app_data.json    # アプリケーションデータ
├── requirements.txt     # 依存関係
└── README.md           # このファイル
```

## アーキテクチャ

MissionManagerは、クリーンアーキテクチャの原則に基づいて設計されています：

- UI層 (`views.py`, `mission_card.py`, `task_item.py`): PySide6を使用したユーザーインターフェース
- ビジネスロジック層 (`app.py`): UIに依存しないビジネスロジック
- データ層 (`storage.py`, `models.py`): データの永続化とモデル定義

依存性注入（DI）パターンを使用しており、各層が疎結合に設計されています。

## データ形式

データはJSON形式で`data/app_data.json`に保存されます：

```json
{
  "genres": [
    {
      "name": "ジャンル名",
      "missions": [
        {
          "name": "ミッション名",
          "tasks": [
            {
              "name": "タスク名",
              "done": false,
              "completed_at": null
            }
          ],
          "due_date": "2024-12-31",
          "completed_at": null
        }
      ]
    }
  ]
}
```

## 開発

### コードスタイル

- Python 3.10+の型ヒントを使用
- TypedDictによる型安全なデータ構造
- エラーハンドリングの徹底

